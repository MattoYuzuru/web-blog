(()=>{var e={};e.id=741,e.ids=[741],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},1041:e=>{"use strict";e.exports=require("node:url")},750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>g,tree:()=>o}),r(1584),r(1412),r(5866);var a=r(3191),s=r(8716),l=r(7922),d=r.n(l),i=r(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(t,n);let o=["",{children:["article",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1584)),"/home/mattoyudzuru/IdeaProjects/web-blog/frontend/src/app/article/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1412)),"/home/mattoyudzuru/IdeaProjects/web-blog/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/mattoyudzuru/IdeaProjects/web-blog/frontend/src/app/article/new/page.tsx"],x="/article/new/page",m={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/article/new/page",pathname:"/article/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3604:(e,t,r)=>{Promise.resolve().then(r.bind(r,2820))},2820:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(326),s=r(7577),l=r(5047),d=r(6333),i=r(6557);let n=(0,i.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=r(5290);let c=(0,i.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var x=r(434);let m=(0,i.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);var g=r(2714),p=r(7104);function u({value:e,onChange:t,placeholder:r}){let[l,d]=(0,s.useState)("write");return(0,a.jsxs)("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex border-b border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>d("write"),className:`flex items-center space-x-2 px-4 py-2 text-sm font-medium ${"write"===l?"text-violet-600 dark:text-violet-400 bg-white dark:bg-gray-700 border-b-2 border-violet-600 dark:border-violet-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(m,{className:"h-4 w-4"}),a.jsx("span",{children:"Write"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>d("preview"),className:`flex items-center space-x-2 px-4 py-2 text-sm font-medium ${"preview"===l?"text-violet-600 dark:text-violet-400 bg-white dark:bg-gray-700 border-b-2 border-violet-600 dark:border-violet-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Preview"})]})]}),a.jsx("div",{className:"min-h-[400px]",children:"write"===l?a.jsx("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:r||"Write your article in Markdown...",className:"w-full h-[400px] p-4 border-none resize-none focus:outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",style:{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", monospace'}}):a.jsx("div",{className:"p-4 bg-white dark:bg-gray-700 min-h-[400px]",children:e.trim()?a.jsx(p.Z,{content:e}):a.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Nothing to preview. Start writing in the Write tab."})})}),"write"===l&&(0,a.jsxs)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800 border-t border-gray-300 dark:border-gray-600 text-xs text-gray-500 dark:text-gray-400",children:[a.jsx("span",{className:"font-medium",children:"Markdown tips:"}),(0,a.jsxs)("span",{className:"ml-2",children:["**bold** *italic* `code` [link](url) # heading ## subheading - list item ",">"," quote"]})]})]})}var h=r(8069);function b(){let[e,t]=(0,s.useState)({title:"",content:"",image_url:"",tags:[]}),[r,i]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1),[p,b]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[v,k]=(0,s.useState)(!1),f=(0,l.useRouter)(),N=async t=>{if(t.preventDefault(),!e.title.trim()||!e.content.trim()){b("Название и контент обязательны");return}g(!0),b(""),j("");try{let t=await h.x.createArticle(e);t.success?(j("Статья успешно опубликована!"),setTimeout(()=>{f.push(`/article/${t.data.id}`)},2e3)):b(t.message||"Не вышло создать статью.")}catch(e){b("Ошибка при создании статьи. Попробуйте ещё раз."),console.error("Ошибка при создании статьи:",e)}finally{g(!1)}},w=e=>{let{name:r,value:a}=e.target;t(e=>({...e,[r]:a})),p&&b("")},P=e=>{t(t=>({...t,tags:t.tags.filter(t=>t!==e)}))};return v?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(x.default,{href:"/",className:"inline-flex items-center space-x-2 text-violet-600 hover:text-violet-700 font-medium",children:[a.jsx(d.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Назад"})]}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Создать новую статью"})]})}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[p&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:p})}),y&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900 border border-green-200 dark:border-green-700 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:y})}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Название статьи *"}),a.jsx("input",{type:"text",id:"title",name:"title",required:!0,value:e.title,onChange:w,placeholder:"Введите подходящее для статьи название: ",className:"input-field text-lg font-medium",disabled:m})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"image_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL Картинки"}),a.jsx("input",{type:"url",id:"image_url",name:"image_url",value:e.image_url,onChange:w,placeholder:"https://example.com/image.jpg (400x200px рекомендуется)",className:"input-field",disabled:m}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Опционально. Рекомендованный размер картинки: 400x200px. Можно оставить пустым."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),onKeyDown:a=>{if("Enter"===a.key||","===a.key){a.preventDefault();let s=r.trim().toLowerCase();s&&!e.tags.includes(s)&&(t(e=>({...e,tags:[...e.tags,s]})),i(""))}},placeholder:"Type a tag and press Enter or comma...",className:"input-field",disabled:m}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:'Использовать Enter или "," для тегов. Например: js, java, tutorial'}),e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:e.tags.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-violet-100 dark:bg-violet-900 text-violet-800 dark:text-violet-200 text-sm font-medium rounded-full",children:["#",e,a.jsx("button",{type:"button",onClick:()=>P(e),className:"ml-2 text-violet-600 hover:text-violet-800 dark:text-violet-400 dark:hover:text-violet-200",disabled:m,children:a.jsx(n,{className:"h-3 w-3"})})]},e))})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Контент статьи *"}),a.jsx(u,{value:e.content,onChange:e=>{t(t=>({...t,content:e})),p&&b("")},placeholder:"Напишите статью в формате Markdown..."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"* Обязательные поля"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(x.default,{href:"/",className:"btn-secondary",children:"Отмена"}),a.jsx("button",{type:"submit",disabled:m||!e.title.trim()||!e.content.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:m?(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.Z,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{children:"Отправляю..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(c,{className:"h-4 w-4"}),a.jsx("span",{children:"Опубликовать"})]})})]})]})]})]}):null}},7104:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(326),s=r(9080),l=r(6394),d=r(2283);function i({content:e}){return a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:a.jsx(s.UG,{remarkPlugins:[l.Z],rehypePlugins:[d.Z],components:{h1:({children:e})=>a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 pb-2 border-b border-gray-200 dark:border-gray-700",children:e}),h2:({children:e})=>a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-4 mt-8",children:e}),h3:({children:e})=>a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3 mt-6",children:e}),p:({children:e})=>a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:e}),code:({node:e,inline:t,className:r,children:s,...l})=>{let d=/language-(\w+)/.exec(r||"");return!t&&d?a.jsx("div",{className:"relative",children:a.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 rounded-lg p-4 overflow-x-auto mb-4",children:a.jsx("code",{className:r,...l,children:s})})}):a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm font-mono",...l,children:s})},blockquote:({children:e})=>a.jsx("blockquote",{className:"border-l-4 border-violet-500 pl-4 my-4 italic text-gray-600 dark:text-gray-400",children:e}),ul:({children:e})=>a.jsx("ul",{className:"list-disc list-inside mb-4 space-y-2",children:e}),ol:({children:e})=>a.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-2",children:e}),li:({children:e})=>a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:e}),a:({href:e,children:t})=>a.jsx("a",{href:e,className:"text-violet-600 dark:text-violet-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:t}),table:({children:e})=>a.jsx("div",{className:"overflow-x-auto mb-4",children:a.jsx("table",{className:"min-w-full border border-gray-200 dark:border-gray-700 rounded-lg",children:e})}),th:({children:e})=>a.jsx("th",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 text-left font-semibold",children:e}),td:({children:e})=>a.jsx("td",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:e})},children:e})})}r(4803)},1584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`/home/mattoyudzuru/IdeaProjects/web-blog/frontend/src/app/article/new/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[188,694,790],()=>r(750));module.exports=a})();