(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4672:function(e,t,r){Promise.resolve().then(r.bind(r,7455))},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{color:i="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:h,...m}=r;return(0,s.createElement)("svg",{ref:o,...a,width:c,height:c,stroke:i,strokeWidth:u?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(n(e)),d].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9090:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},257:function(e,t,r){"use strict";var s,a;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,s,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function s(e){var a=r[e];if(void 0!==a)return a.exports;var n=r[e]={exports:{}},o=!0;try{t[e](n,n.exports,s),o=!1}finally{o&&delete r[e]}return n.exports}s.ab="//";var a=s(229);e.exports=a}()},7455:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(7437),a=r(2265),n=r(9376),o=r(9763);let i=(0,o.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var c=r(9090);let l=(0,o.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var u=r(2208),d=r(5863),h=r(1837);function m(){let[e,t]=(0,a.useState)({username:"",password:""}),[r,o]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),[f,p]=(0,a.useState)(""),[x,y]=(0,a.useState)(!1),k=(0,n.useRouter)(),v=async t=>{if(t.preventDefault(),!e.username.trim()||!e.password.trim()){p("Заполните все поля");return}g(!0),p(""),y(!1);try{var r;console.log("Attempting login with:",{login:e.username});let t=await h.x.login({login:e.username,password:e.password});console.log("Login response:",t),t.success&&(null===(r=t.data)||void 0===r?void 0:r.access_token)?(console.log("Login successful, redirecting to homepage"),y(!0),setTimeout(()=>{k.push("/"),k.refresh()},1e3)):p(t.message||"Ошибка логина. Проверь введенные данные.")}catch(e){console.error("Login error:",e),p("Ошибка логина. Попробуй ещё раз.")}finally{g(!1)}},b=e=>{let{name:r,value:s}=e.target;t(e=>({...e,[r]:s})),f&&p("")};return x?(0,s.jsx)("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"max-w-md w-full space-y-8 text-center",children:(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900 border border-green-200 dark:border-green-700 rounded-lg p-6",children:[(0,s.jsx)(i,{className:"mx-auto h-12 w-12 text-green-600 dark:text-green-400 mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Вход выполнен успешно!"}),(0,s.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Перенаправляем на главную страницу..."})]})})}):(0,s.jsx)("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-violet-600"}),(0,s.jsx)("h2",{className:"mt-6 text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Войти в аккаунт"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Доступ к дешборду KeykoMI Lib"})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:v,children:[f&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:f})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),(0,s.jsx)("input",{id:"username",name:"username",type:"text",required:!0,value:e.username,onChange:b,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Enter your username",disabled:m})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:"password",name:"password",type:r?"text":"password",required:!0,value:e.password,onChange:b,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Enter your password",disabled:m}),(0,s.jsx)("button",{type:"button",onClick:()=>o(!r),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:m,children:r?(0,s.jsx)(l,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(u.Z,{className:"h-4 w-4 text-gray-400"})})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:m,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-violet-600 hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Signing in..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Sign in"]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Свяжитесь со мной если хотите поучаствовать в создании контента :)"})})]})]})})}},1837:function(e,t,r){"use strict";r.d(t,{x:function(){return a}}),r(257);class s{getBaseUrl(){return"http://localhost:8081"}initializeToken(){this.token=localStorage.getItem("auth_token")}isAuthenticated(){return this.token=localStorage.getItem("auth_token"),!!this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token=localStorage.getItem("auth_token"),this.token&&(s.Authorization="Bearer ".concat(this.token));try{console.log("Making request to: ".concat(r));let e=await fetch(r,{...t,headers:s,mode:"cors"});if(!e.ok){if(401===e.status)throw this.logout(),Error("Unauthorized - please login again");throw Error("HTTP error! status: ".concat(e.status))}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async login(e){try{var t;let r=await this.request("/api/auth/login",{method:"POST",body:JSON.stringify(e)});if(!r.success||null===(t=r.data)||void 0===t||!t.access_token)return console.error("Login failed or no token received:",r),{data:{},success:!1,message:"Login failed"};return this.token=r.data.access_token,localStorage.setItem("auth_token",this.token),console.log("Token saved to localStorage:",this.token.substring(0,20)+"..."),{data:r.data,success:!0}}catch(e){return console.error("Login error:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Login failed"}}}logout(){this.token=null,localStorage.removeItem("auth_token")}async getArticles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return{data:await this.request("/api/articles?page=".concat(e,"&limit=").concat(t)),success:!0}}catch(e){return console.error("Failed to get articles:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to get articles"}}}async getArticle(e){try{return{data:await this.request("/api/articles/".concat(e)),success:!0}}catch(e){return console.error("Failed to get article:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to get article"}}}async createArticle(e){try{return{data:await this.request("/api/articles",{method:"POST",body:JSON.stringify(e)}),success:!0}}catch(e){return console.error("Failed to create article:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to create article"}}}async searchArticles(e){try{return{data:await this.request("/api/articles/search?q=".concat(encodeURIComponent(e))),success:!0}}catch(e){return console.error("Failed to search articles:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to search articles"}}}constructor(){this.token=null,this.baseUrl=this.getBaseUrl(),this.initializeToken()}}let a=new s}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4672)}),_N_E=e.O()}]);