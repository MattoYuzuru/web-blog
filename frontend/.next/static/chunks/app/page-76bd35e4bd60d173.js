(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1152:function(e,t,r){Promise.resolve().then(r.bind(r,6405))},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9090:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},7692:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},257:function(e,t,r){"use strict";var a,s;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,a,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(e){r=n}}();var l=[],c=!1,d=-1;function u(){c&&a&&(c=!1,a.length?l=a.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(a=l,l=[];++d<t;)a&&a[d].run();d=-1,t=l.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new g(e,t)),1!==l.length||c||i(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function a(e){var s=r[e];if(void 0!==s)return s.exports;var o=r[e]={exports:{}},n=!0;try{t[e](o,o.exports,a),n=!1}finally{n&&delete r[e]}return o.exports}a.ab="//";var s=a(229);e.exports=s}()},6405:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(7437),s=r(2265),o=r(9376),n=r(9763);let i=(0,n.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function l(e){let{onSearch:t,placeholder:r="Найти статью..."}=e,[o,n]=(0,s.useState)("");return(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),t(o)},className:"w-full max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>{n(e.target.value)},placeholder:r,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white dark:bg-gray-800 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 dark:focus:placeholder-gray-300 focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-gray-900 dark:text-gray-100"}),(0,a.jsx)("button",{type:"submit",className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,a.jsx)("div",{className:"bg-violet-600 hover:bg-violet-700 px-4 py-2 rounded-md text-white font-medium transition-colors",children:"Искать"})})]})})}var c=r(7648),d=r(3145),u=r(3448),h=r(1047),g=r(2208);function m(e){let{article:t}=e;return(0,a.jsxs)("article",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[(0,a.jsx)(c.default,{href:"/article/".concat(t.id),className:"block",children:(0,a.jsx)("div",{className:"relative h-48 w-full",children:(0,a.jsx)(d.default,{src:t.image_url||"/placeholder-article.jpg",alt:t.title,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300"})})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)(c.default,{href:"/article/".concat(t.id),children:(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 hover:text-violet-600 dark:hover:text-violet-400 transition-colors mb-3 line-clamp-2",children:t.title})}),(0,a.jsx)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:(0,u.p6)(t.published_at)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:(0,u.u5)(t.read_count)})]})]})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map(e=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-violet-100 dark:bg-violet-900 text-violet-800 dark:text-violet-200 text-xs font-medium rounded-full",children:["#",e]},e))})]})]})}var x=r(1837),f=r(7692),y=r(9090);let p=(0,n.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var v=r(5863);function k(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[i,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[k,b]=(0,s.useState)(!1),w=(0,o.useRouter)(),j=e=>{var t;return{id:(null===(t=e.id)||void 0===t?void 0:t.toString())||"",title:e.title||"No title",content:e.content||"",image_url:e.image_url||"/placeholder-article.jpg",published_at:e.published_at||new Date().toISOString().split("T")[0],read_count:e.read_count||0,tags:e.tags||[],author:e.author||"KeykoMI"}};(0,s.useEffect)(()=>{b(x.x.isAuthenticated()),N()},[]);let N=async()=>{n(!0),u(""),g(!1);try{console.log("Loading articles...");let a=await x.x.getArticles();if(a.success){console.log("Articles loaded successfully:",a.data);let e=(a.data.content||[]).map(j);t(e)}else{var e,r;console.error("Failed to load articles:",a.message),(null===(e=a.message)||void 0===e?void 0:e.includes("Unauthorized"))||(null===(r=a.message)||void 0===r?void 0:r.includes("401"))?(g(!0),b(!1),u("Authorization required to view articles")):(u(a.message||"Failed to load articles"),t(_()))}}catch(e){console.error("Failed to load articles:",e),u("Failed to connect to server"),t(_())}finally{n(!1)}},_=()=>[{id:"1",title:"Зачем вести отдельный сайт для блога если есть Телеграм?",content:"Контент.",image_url:"/placeholder-article.jpg",published_at:"2025-08-09",read_count:1,tags:["thoughts"],author:"KeykoMI"},{id:"2",title:"Путешествие в Корею, август-сентябрь 2025",content:"Контент статьи",image_url:"/placeholder-article.jpg",published_at:"2025-08-10",read_count:5,tags:["travel"],author:"KeykoMI"},{id:"3",title:"Пример статьи",content:"Контент",image_url:"/placeholder-article.jpg",published_at:"2025-08-05",read_count:1,tags:["life"],author:"KeykoMI"}],S=async e=>{if(!e.trim()){N();return}n(!0),c(e),u("");try{let s=await x.x.searchArticles(e);if(s.success){let e=(s.data.content||[]).map(j);t(e)}else{var r,a;if((null===(r=s.message)||void 0===r?void 0:r.includes("Unauthorized"))||(null===(a=s.message)||void 0===a?void 0:a.includes("401")))g(!0),b(!1),u("Authorization required to search articles");else{u(s.message||"Search failed");let r=_().filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.tags.some(t=>t.toLowerCase().includes(e.toLowerCase())));t(r)}}}catch(r){console.error("Search failed:",r),u("Search failed"),t(_().filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.tags.some(t=>t.toLowerCase().includes(e.toLowerCase()))))}finally{n(!1)}},L=()=>{w.push("/login")};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:"Welcome to KeykoMI Lib"})}),(0,a.jsx)("div",{className:"ml-4",children:k?(0,a.jsxs)("button",{onClick:()=>{x.x.logout(),b(!1),N()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-red-600 bg-red-100 hover:bg-red-200 dark:text-red-200 dark:bg-red-800 dark:hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Logout"]}):(0,a.jsxs)("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-violet-600 bg-violet-100 hover:bg-violet-200 dark:text-violet-200 dark:bg-violet-800 dark:hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Login"]})})]}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto",children:"Блог о моей жизни, учебе, карьере..."}),(0,a.jsx)(l,{onSearch:S}),i&&(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:r?"Searching...":'Search results for "'.concat(i,'"')})]}),d&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"rounded-lg p-4 ".concat(h?"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700":"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p,{className:"h-5 w-5 ".concat(h?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"," mr-3")}),(0,a.jsx)("p",{className:"text-sm ".concat(h?"text-yellow-700 dark:text-yellow-300":"text-red-700 dark:text-red-300"),children:d})]}),h&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("button",{onClick:L,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 dark:text-yellow-200 dark:bg-yellow-800 dark:hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Go to Login"]})})]})}),r?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(v.Z,{className:"h-8 w-8 animate-spin text-violet-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading articles..."})]}):e.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>(0,a.jsx)(m,{article:e},e.id))}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:i?"No articles found matching your search.":"No articles available."}),i&&(0,a.jsx)("button",{onClick:()=>{c(""),N()},className:"mt-4 text-violet-600 hover:text-violet-700 font-medium",children:"Clear search and view all articles"})]})]})}},1837:function(e,t,r){"use strict";r.d(t,{x:function(){return s}}),r(257);class a{getBaseUrl(){return"http://localhost:8081"}initializeToken(){this.token=localStorage.getItem("auth_token")}isAuthenticated(){return this.token=localStorage.getItem("auth_token"),!!this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),a={"Content-Type":"application/json",...t.headers};this.token=localStorage.getItem("auth_token"),this.token&&(a.Authorization="Bearer ".concat(this.token));try{console.log("Making request to: ".concat(r));let e=await fetch(r,{...t,headers:a,mode:"cors"});if(!e.ok){if(401===e.status)throw this.logout(),Error("Unauthorized - please login again");throw Error("HTTP error! status: ".concat(e.status))}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async login(e){try{var t;let r=await this.request("/api/auth/login",{method:"POST",body:JSON.stringify(e)});if(!r.success||null===(t=r.data)||void 0===t||!t.access_token)return console.error("Login failed or no token received:",r),{data:{},success:!1,message:"Login failed"};return this.token=r.data.access_token,localStorage.setItem("auth_token",this.token),console.log("Token saved to localStorage:",this.token.substring(0,20)+"..."),{data:r.data,success:!0}}catch(e){return console.error("Login error:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Login failed"}}}logout(){this.token=null,localStorage.removeItem("auth_token")}async getArticles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return{data:await this.request("/api/articles?page=".concat(e,"&limit=").concat(t)),success:!0}}catch(e){return console.error("Failed to get articles:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to get articles"}}}async getArticle(e){try{return{data:await this.request("/api/articles/".concat(e)),success:!0}}catch(e){return console.error("Failed to get article:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to get article"}}}async createArticle(e){try{return{data:await this.request("/api/articles",{method:"POST",body:JSON.stringify(e)}),success:!0}}catch(e){return console.error("Failed to create article:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to create article"}}}async searchArticles(e){try{return{data:await this.request("/api/articles/search?q=".concat(encodeURIComponent(e))),success:!0}}catch(e){return console.error("Failed to search articles:",e),{data:{},success:!1,message:e instanceof Error?e.message:"Failed to search articles"}}}constructor(){this.token=null,this.baseUrl=this.getBaseUrl(),this.initializeToken()}}let s=new a},3448:function(e,t,r){"use strict";function a(e){return new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})}function s(e){return e<1e3?e.toString():e<1e6?"".concat(Math.floor(e/100)/10,"k"):"".concat(Math.floor(e/1e5)/10,"M")}r.d(t,{p6:function(){return a},u5:function(){return s}})}},function(e){e.O(0,[451,145,971,117,744],function(){return e(e.s=1152)}),_N_E=e.O()}]);